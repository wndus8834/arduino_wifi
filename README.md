## arduino_wifi
### 주차 유무 확인 프로그램 (적외선 센서 관련 안드로이드 APP)

1. 프로젝트 개발 목적

* 내 차가 어느 구역에 있는지를 직접 볼 수 있으면 편리하겠다라는 생각을 종종 했고, 어느 곳에 주차할 곳이 남아 있는지를 안다면 주차장을 배회하지 않아도 되기 때문에 시간적으로도 훨씬 효율성이 있을 것 같아서 이 프로젝트에서 기획하게 되었습니다.

2. 개발 환경

    ![image](https://user-images.githubusercontent.com/38427658/53644979-3affd700-3c7b-11e9-8e94-aafc862caf3b.png)

    아두이노는 wifi 모듈이 내장되어 있는 오렌지 보드와 적외선센서를 사용하였습니다.
    안드로이드 api27 이상 버전을 사용하였고,
    서버와 DB는 웹 호스팅을 통해 php와 mySQL을 연동하여 사용하였고,
    웹은 WIX를 이용해 제작하였습니다.

3. 시스템 구성도

    ![image](https://user-images.githubusercontent.com/38427658/53645095-7d291880-3c7b-11e9-87a0-508a8675eabf.png)

    아두이노에 연결된 적외선 초음파 센서가 data를 실시간으로 server에 전송해주고, db에는 어느 구역에 차가 주차되었는지 확인할 수 있습니다.
    그리고 안드로이드는 서버와 연결해 그 data를 받아오는 구성을 가졌습니다.

4. Arduino

* wifi로 핸드폰과 아두이노를 통신시킨 후 센서를 이용해 물체의 유무를 감지하도록 설계하였습니다. 우선 wifi 통신을 하기 위해 wifi 모듈이 내장에 장착되어 있는 오렌지보드를 선택하였고 물체의 유무 감지를 위한 센서는 초음파 센서와 적외선 센서를 고민하던 중 적외선 센서를 선택하였습니다.
초음파센서는 상대적으로 직진성이 좋지 않은 것 같지만 물체까지의 거리를 측정하기에 좋지만 적외선 센서는 반면에 초음파 센서보다 직진성이 좋은 것 같아 선택할 때 이러한 점에 유의를 두었습니다. 물론, 적외선 센서는 거리의 제약이 있기도 하고 주변 및 형광등 등에 노이즈를 받기도 하지만 적당한 필터를 주면 괜찮다고 생각하였습니다.
그래서 적외선 센서를 사용하는 방법을 선택하게 되었습니다. 비교기를 사용하여 수광부에 들어오는 빛에 따른 출력 전압이 기준전압보다 높은 것은 HIGH로 낮은 것은 LOW로 사용하는 방법을 택했습니다.
![image](https://user-images.githubusercontent.com/38427658/53646532-c0d15180-3c7e-11e9-9c69-2bb109a33095.png)

5. Android

    <로딩화면>

    ![image](https://user-images.githubusercontent.com/38427658/53646659-1f96cb00-3c7f-11e9-9d09-4ad3f8ffe9a4.png)

    <메인화면>
 
    ![image](https://user-images.githubusercontent.com/38427658/53646717-3b9a6c80-3c7f-11e9-93b2-65b5b1ed865e.png)

    * 주차확인

        ![image](https://user-images.githubusercontent.com/38427658/53646759-566ce100-3c7f-11e9-97c0-259c5cab60aa.png)

        ![image](https://user-images.githubusercontent.com/38427658/53646842-9207ab00-3c7f-11e9-91c9-94693d60a9a9.png)

        주요기능인 주차확인 레이아웃입니다.
        레이아웃 화면을 UI를 실제 구현 판과 동일한 모습으로 포토샵을 하여 적용하였습니다.
        CurrentActivity를 두어 Permisson 정보를 가져와 허가되었을 시, 서버를 통해 주차장내에 접속하고 있는 data를 json 형태로 전송을 받아, 화면으로 뿌려줍니다. 
        그리고 setScreen이라는 함수를 두어 주차장 구역, 유무, data, 사용자의 핸드폰 번호 정보를 불러오고 저장해줍니다.

    * 시간 당 요금 계산
    
        ![image](https://user-images.githubusercontent.com/38427658/53646875-a0ee5d80-3c7f-11e9-9914-d587de421875.png)

        왼쪽 빨간 아이콘은 다른 사용자가 주차 중일 때를 표시하는 아이콘입니다. 그리고 3번쨰 있는 아이콘은 내 차를 지정했을 때 나타나는 아이콘입니다.
        자세히 보시면 등록된 날짜, 시간, 요금계산이 되어있는 것을 보실 수 있습니다.
        그리고 날짜, 시간 형태를 표시 해주기 위해 SimpleDateFormat객체를 사용해주어 날짜, 시간 형태를 표현해 주었습니다.
        밑엔 있는 사진들은 실제 성공회대 주차요금표와 그것을 계산한 코드입니다.

    * 공지사항

        ![image](https://user-images.githubusercontent.com/38427658/53647052-004c6d80-3c80-11e9-97cc-47bffad3eaef.png)

        Wix로 제작한 웹페이지를 연결하여 공지사항을 볼 수 있게 하였습니다. 회원은 글을 쓸 수 있는 관리자와 글을 보거나 댓글을 달고 좋아요를 누를 수 있는 일반 회원으로 총 2종류로 나누었습니다. 관리자의 권한은 관리자가 되고 싶은 일반 회원에게도 부여할 수 있는데, 이 부여권은 웹을 만든 최종 관리자인 저희 팀에서 관리를 합니다. 

    * 푸시 알람

        ![image](https://user-images.githubusercontent.com/38427658/53647135-3558c000-3c80-11e9-9362-ff4b721c8183.png)

        푸시알람기능을 이용해 사용자는 시간을 설정하여 알람을 설정할 수 있습니다. 해당 시간이 되면 푸시알람과 함께 알림음이 울리며 사용자는 이 기능을 이용하여 주차 시간을 조절할 수 있습니다. 